{"ast":null,"code":"var axios = require('axios');\n\nvar API_URL = \"http://localhost:5000/api/v1\"; // const job_instance = axios.create({\n//   baseURL: API_URL + '/works',\n// });\n\nvar users_instance = axios.create({\n  baseURL: API_URL + '/users'\n});\nvar seats_instance = axios.create({\n  baseURL: API_URL + '/seats'\n});\n\nvar signup = function signup(name, username, password, email, role, SSN, phoneNumber, DoB, sex, department, room) {\n  //console.log(\"uname: \" + username)\n  var role1 = 0;\n  if (role == \"doctor\") role1 = 1;\n  return new Promise(function (resolve, reject) {\n    users_instance.post('/signup', {\n      name: name,\n      username: username,\n      password: password,\n      email: email,\n      role: role1,\n      //address: address,\n      SSN: SSN,\n      phoneNumber: phoneNumber,\n      DoB: DoB,\n      sex: sex,\n      department: department,\n      room: room\n    }).then(function (response) {\n      if (response['data']['success'] != true) {\n        return reject(response['data']['message']); // không thành công\n      }\n\n      return resolve(response['data']['success']); //ok\n    }).catch(function (err) {\n      return reject(err);\n    });\n  });\n};\n\nvar signin = function signin(username, password) {\n  return new Promise(function (resolve, reject) {\n    users_instance.post('/signin', {\n      username: username,\n      password: password\n    }).then(function (response) {\n      if (response['data']['success'] != true) {\n        return reject(response['data']['message']);\n      }\n\n      return resolve(response['data']['data']);\n    }).catch(function (err) {\n      return reject(err);\n    });\n  });\n};\n\nvar getuser = function getuser() {\n  return new Promise(function (resolve, reject) {\n    var header = 'Bearer ' + sessionStorage.getItem('jwt');\n    users_instance.defaults.headers.common['Authorization'] = header;\n    users_instance.get('/me').then(function (response) {\n      if (response['data']['success'] != true) {\n        return reject(response['data']['message']);\n      }\n\n      return resolve(response['data']['data']);\n    }).catch(function (err) {\n      return reject(err);\n    });\n  });\n};\n\nvar changepassword = function changepassword(username, password, new_password) {\n  return new Promise(function (resolve, reject) {\n    var header = 'Bearer ' + sessionStorage.getItem('jwt');\n    users_instance.defaults.headers.common['Authorization'] = header;\n    users_instance.post('/reset_password', {\n      username: username,\n      password: password,\n      new_password: new_password\n    }).then(function (response) {\n      if (response['data']['success'] != true) {\n        return reject(response['data']['message']);\n      }\n\n      return resolve(response['data']['success']);\n    }).catch(function (err) {\n      return reject(err);\n    });\n  });\n};\n\nvar booking = function booking(date, shift, department) {\n  console.log(\"Ca: \" + shift + 1);\n  console.log(\"Ngày: \" + date);\n  console.log(\"Department: \" + department);\n  return new Promise(function (resolve, reject) {\n    var header = 'Bearer ' + sessionStorage.getItem('jwt');\n    seats_instance.defaults.headers.common['Authorization'] = header;\n    seats_instance.post('/', {\n      date: date,\n      shift: shift,\n      department: department\n    }).then(function (response) {\n      if (response['data']['success'] != true) {\n        console.log(response['data']['success']);\n        return reject(response['data']['message']);\n      }\n\n      return resolve(response['data']['success']);\n    }).catch(function (err) {\n      return reject(err);\n    });\n  });\n};\n\nmodule.exports = {\n  signup: signup,\n  signin: signin,\n  changepassword: changepassword,\n  getuser: getuser,\n  booking: booking\n};","map":{"version":3,"sources":["C:\\Users\\welcome\\Desktop\\TTCNPM\\front-end\\hplBooking_frontend\\src\\components\\api.js"],"names":["axios","require","API_URL","users_instance","create","baseURL","seats_instance","signup","name","username","password","email","role","SSN","phoneNumber","DoB","sex","department","room","role1","Promise","resolve","reject","post","then","response","catch","err","signin","getuser","header","sessionStorage","getItem","defaults","headers","common","get","changepassword","new_password","booking","date","shift","console","log","module","exports"],"mappings":"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","sourcesContent":["const axios = require('axios');\r\n\r\nconst API_URL = \"http://localhost:5000/api/v1\";\r\n\r\n// const job_instance = axios.create({\r\n//   baseURL: API_URL + '/works',\r\n// });\r\n\r\nconst users_instance = axios.create({\r\n  baseURL: API_URL + '/users',\r\n});\r\n\r\nconst seats_instance = axios.create({\r\n  baseURL: API_URL + '/seats',\r\n});\r\n\r\nvar signup = (name, username, password, email,  role, SSN, phoneNumber, DoB, sex, department, room) => {\r\n  //console.log(\"uname: \" + username)\r\n  let role1 = 0;\r\n  if(role == \"doctor\") role1 = 1;\r\n  return new Promise((resolve, reject) => {\r\n    users_instance\r\n      .post('/signup', {\r\n        name: name,\r\n        username: username,\r\n        password: password,\r\n        email: email,\r\n        role: role1,\r\n        //address: address,\r\n        SSN: SSN,\r\n        phoneNumber: phoneNumber,\r\n        DoB: DoB,\r\n        sex: sex,\r\n        department,\r\n        room\r\n      })\r\n      .then(response => {\r\n        if (response['data']['success'] != true) {\r\n          return reject(response['data']['message']); // không thành công\r\n        }\r\n        return resolve(response['data']['success']); //ok\r\n      })\r\n      .catch(err => {\r\n        return reject(err);\r\n      });\r\n  });\r\n};\r\n\r\nvar signin = (username, password) => {\r\n  return new Promise((resolve, reject) => {\r\n    users_instance\r\n      .post('/signin', {\r\n        username: username,\r\n        password: password,\r\n      })\r\n      .then(response => {\r\n        if (response['data']['success'] != true) {\r\n          return reject(response['data']['message']);\r\n        }\r\n        return resolve(response['data']['data']);\r\n      })\r\n      .catch(err => {\r\n        return reject(err);\r\n      });\r\n  });\r\n};\r\n\r\nvar getuser = () =>{\r\n  return new Promise((resolve, reject) => {\r\n    let header = 'Bearer ' + sessionStorage.getItem('jwt');\r\n    users_instance.defaults.headers.common['Authorization'] = header;\r\n    users_instance\r\n      .get('/me')\r\n      .then(response => {\r\n        if (response['data']['success'] != true) {\r\n          return reject(response['data']['message']);\r\n        }\r\n        return resolve(response['data']['data']);\r\n      })\r\n      .catch(err => {\r\n        return reject(err);\r\n      });\r\n  });\r\n};\r\n\r\nvar changepassword = (username, password, new_password) => {\r\n  return new Promise((resolve, reject) => {\r\n    let header = 'Bearer ' + sessionStorage.getItem('jwt');\r\n    users_instance.defaults.headers.common['Authorization'] = header;\r\n    users_instance\r\n      .post('/reset_password', {\r\n        username: username,\r\n        password: password,\r\n        new_password: new_password,\r\n      })\r\n      .then(response => {\r\n        if (response['data']['success'] != true) {\r\n          return reject(response['data']['message']);\r\n        }\r\n        return resolve(response['data']['success']);\r\n      })\r\n      .catch(err => {\r\n        return reject(err);\r\n      });\r\n  });\r\n};\r\n\r\n\r\nvar booking = (date, shift, department ) => {\r\n  console.log(\"Ca: \" + shift + 1);\r\n  console.log(\"Ngày: \" + date);\r\n  console.log(\"Department: \" + department);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    let header = 'Bearer ' + sessionStorage.getItem('jwt');\r\n    seats_instance.defaults.headers.common['Authorization'] = header;\r\n    seats_instance\r\n      .post('/', {\r\n        date,\r\n        shift,\r\n        department\r\n      })\r\n      \r\n      .then(response => {\r\n        \r\n        if (response['data']['success'] != true) {\r\n          console.log(response['data']['success']);\r\n          return reject(response['data']['message']);\r\n        }\r\n        \r\n        return resolve(response['data']['success']);\r\n      })\r\n      .catch(err => {\r\n        return reject(err);\r\n      });\r\n  });\r\n};\r\n\r\n\r\n\r\nmodule.exports = {\r\n  signup,\r\n  signin,\r\n  changepassword,\r\n  getuser,\r\n  booking\r\n};\r\n"]},"metadata":{},"sourceType":"module"}